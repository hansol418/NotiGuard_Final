#!/bin/bash
# Railway PostgreSQL에 공지사항 마이그레이션

echo "======================================================================"
echo "🚀 Railway DB 마이그레이션"
echo "======================================================================"

# Railway 환경변수 설정 (사용자가 직접 입력해야 함)
export DATABASE_URL="postgresql://postgres:EUxzTKqEvybegsaRhWsySxVcgCRvyZHA@mainline.proxy.rlwy.net:47312/railway"

echo ""
echo "✅ Railway PostgreSQL 연결 설정 완료"
echo ""

# 1. 테이블 확인
echo "======================================================================"
echo "📊 Step 1: 현재 공지사항 확인"
echo "======================================================================"
python3 check_railway_notices.py

echo ""
echo "======================================================================"
echo "📤 Step 2: 공지사항 마이그레이션 시작"
echo "======================================================================"

# 2. 마이그레이션 실행
python3 migrate_json_notices.py

echo ""
echo "======================================================================"
echo "✅ Step 3: 마이그레이션 후 확인"
echo "======================================================================"
python3 check_railway_notices.py

echo ""
echo "======================================================================"
echo "🎉 마이그레이션 완료!"
echo "======================================================================"
